import{r as t,c as o,h as s,a as i,g as e}from"./p-5db40762.js";const r=(t,o)=>{let s=null;return function(...i){if(s){clearTimeout(s)}s=setTimeout((()=>{t(...i);s=null}),o)}};const n=":host{font-family:Helvetica, sans-serif;display:block;max-width:24rem;color:var(--custom-dropdown-font-color, #767676);font-weight:var(--custom-dropdown-font-weight, 700)}form{position:relative}label{display:block;margin-bottom:.5rem}.search{padding:.5rem 1rem;width:100%;box-sizing:border-box;font-size:1rem;background-color:var(--custom-dropdown-background-color, #F5F5F7);color:var(--custom-dropdown-font-color, #767676);font-weight:var(--custom-dropdown-font-weight, 700);border:none}.search-wrapper{position:relative;background:none;border:none;width:100%;background-color:var(--custom-dropdown-background-color, #F5F5F7)}.search-wrapper::before{content:'â–¼';position:absolute;right:.8rem;top:50%;transform:translateY(-50%)}.options{position:absolute;left:0;right:0;padding:0;margin:0;overflow-y:auto;list-style-type:none;transform:scale(1, 0);transform-origin:top left;transition:all 150ms ease-in;pointer-events:none;z-index:2}.options.active{opacity:1;transform:scale(1, 1);pointer-events:auto}";const c=n;const a=class{constructor(s){t(this,s);this.changeDropdown=o(this,"changeDropdown",7);this.filterDebounceMs=200;this.updateOption=()=>{const t=this.getVisibleOptions();const o=t.find((t=>document.activeElement===t));this.selectedOption=o||this.selectedOption;this.changeDropdown.emit(this.selectedOption?this.selectedOption.value:"")};this.getAllOptions=()=>Array.from(this.el.querySelectorAll("custom-option"));this.getVisibleOptions=()=>Array.from(this.el.querySelectorAll("custom-option.visible"));this.getActiveOption=()=>{const t=this.getVisibleOptions();const o=t.findIndex((t=>document.activeElement===t));return{index:o,options:t}};this.focusNextOption=()=>{if(!this.active)this.changeActiveState(true);this.setOptionFocus(this.getNextOrPrevOption("next"))};this.focusPrevOption=()=>{if(!this.active)this.changeActiveState(true);this.setOptionFocus(this.getNextOrPrevOption("prev"))};this.getNextOrPrevOption=t=>{const{index:o,options:s}=this.getActiveOption();if(t==="next")return o===s.length-1?s[0]:s[o+1];return o===0||o===-1?s[s.length-1]:s[o-1]};this.setOptionFocus=t=>{const o=t===null||t===void 0?void 0:t.shadowRoot.querySelector("li");o===null||o===void 0?void 0:o.focus()};this.toggleDropdown=()=>{const t=!this.active;this.changeActiveState(t)};this.changeActiveState=t=>{if(!this.active){this.el.shadowRoot.querySelector("input").focus()}if(!t){this.el.focus()}this.active=t};this.focusSelectedOption=()=>{if(this.selectedOption){this.setOptionFocus(this.selectedOption)}else{this.focusNextOption()}};this.handleInput=t=>{const o=t.target;const s=o.value;this.updateFilter(s)};this.updateFilter=t=>{this.filter=t;this.handleChangeFilterDebounced(this.filter)};this.handleChangeFilterDebounced=r((t=>{this.updateOptionVisibility(t)}),this.filterDebounceMs);this.updateOptionVisibility=t=>{const o=this.getAllOptions();o.forEach((o=>{if(this.optionIsVisible(t,o)){o.classList.add("visible")}else{o.classList.remove("visible")}}))};this.optionIsVisible=(t,o)=>t===""||o.innerHTML.toLowerCase().includes(t.toLowerCase());this.label=undefined;this.active=false;this.selectedOption=null;this.filter=""}componentDidLoad(){this.updateOptionVisibility(this.filter)}handleFocus(){this.toggleDropdown()}handleClick(t){if(t.target instanceof customElements.get("custom-option")){const o=t.target;this.selectedOption=o;this.updateOption();this.toggleDropdown()}}handleDocumentClick(t){if(!this.active){return}if(!this.el.contains(t.target)){this.changeActiveState(false)}}handleKeyDown(t){var o;switch(t.key){case"Enter":case" ":t.preventDefault();if(this.active){this.updateOption()}this.toggleDropdown();if(this.selectedOption){this.focusSelectedOption()}break;case"Escape":if(this.active){this.changeActiveState(false);this.updateFilter(((o=this.selectedOption)===null||o===void 0?void 0:o.innerHTML)||this.filter)}break;case"ArrowDown":t.preventDefault();this.focusNextOption();break;case"ArrowUp":t.preventDefault();this.focusPrevOption();break}}render(){var t;return s(i,{key:"f9c4a52ff48757a149991ded4e7d6768c14d7987"},s("form",{key:"9be86f80be57986f309f0115d3a709d950f60f36"},s("label",{key:"33d34af7071a700d7221e767f0e1099988fd64df",htmlFor:this.label},this.label),s("div",{key:"ae2fc28011355c85f836c6bcef3e544c80eb9102",class:"search-wrapper"},s("input",{key:"29c65f41bbeb54e60fc36d215ef3139df76e004e",class:"search",type:"text",placeholder:"Select",id:this.label,role:"combobox","aria-controls":`listbox-${this.label}`,"aria-haspopup":`listbox-${this.label}`,tabindex:"0","aria-expanded":this.active.toString(),onInput:this.handleInput,value:((t=this.selectedOption)===null||t===void 0?void 0:t.innerHTML)||this.filter})),s("ul",{key:"6360b019117a359c616dbc5de6c36314ea14d7fa",class:`options${this.active?" active":""}`,role:"listbox",id:`listbox-${this.label}`},s("slot",{key:"f80e99d442e5eb6e765b6be033a4c854ad1c5674"}))))}get el(){return e(this)}};a.style=c;const h=":host{display:none}:host(.visible){display:block}li{padding:.5rem 1rem;background-color:var(--custom-dropdown-background-color, #F5F5F7);cursor:pointer;transition:all 150ms ease-in;position:relative;font-family:Helvetica, sans-serif;color:var(--custom-dropdown-font-color, #767676)}li:hover{background-color:var(--custom-option-background-color-hover, #E5E5EA)}li:focus{background-color:var(--custom-option-background-color-focus, #D1D1D6)}";const l=h;const d=class{constructor(o){t(this,o);this.value=undefined}render(){return s(i,{key:"199fe97083f2954192dc1d49c2151303dfe9b20b"},s("li",{key:"a0ec203b372705661853a119948cc79e95bc4b47",role:"option",tabIndex:0},s("slot",{key:"d46cc1365da88917287c5b1ff36cf7fa294eb305"})))}get el(){return e(this)}};d.style=l;export{a as custom_dropdown,d as custom_option};
//# sourceMappingURL=p-06c39cd0.entry.js.map
import{r as t,c as o,h as s,a as i,g as e}from"./p-5db40762.js";const n=(t,o)=>{let s=null;return function(...i){if(s){clearTimeout(s)}s=setTimeout((()=>{t(...i);s=null}),o)}};const r=":host{font-family:Helvetica, sans-serif;display:block;max-width:24rem;color:var(--custom-dropdown-font-color, #767676);font-weight:var(--custom-dropdown-font-weight, 700)}form{position:relative}label{display:block;margin-bottom:.5rem}.search{padding:.5rem 1rem;width:100%;box-sizing:border-box;font-size:1rem;background-color:var(--custom-dropdown-background-color, #F5F5F7);color:var(--custom-dropdown-font-color, #767676);font-weight:var(--custom-dropdown-font-weight, 700);border:none}.search-wrapper{position:relative;background:none;border:none;width:100%;background-color:var(--custom-dropdown-background-color, #F5F5F7)}.search-wrapper::before{content:'â–¼';position:absolute;right:.8rem;top:50%;transform:translateY(-50%)}.options{position:absolute;left:0;right:0;padding:0;margin:0;overflow-y:auto;list-style-type:none;transform:scale(1, 0);transform-origin:top left;transition:all 150ms ease-in;pointer-events:none;z-index:2}.options.active{opacity:1;transform:scale(1, 1);pointer-events:auto}";const c=r;const a=class{constructor(s){t(this,s);this.changeDropdown=o(this,"changeDropdown",7);this.filterDebounceMs=200;this.updateOption=()=>{const t=this.getVisibleOptions();const o=t.find((t=>document.activeElement===t));this.selectedOption=o||this.selectedOption;this.changeDropdown.emit(this.selectedOption?this.selectedOption.value:"")};this.getAllOptions=()=>Array.from(this.el.querySelectorAll("custom-option"));this.getVisibleOptions=()=>Array.from(this.el.querySelectorAll("custom-option.visible"));this.setOptionFocus=t=>{const o=t===null||t===void 0?void 0:t.shadowRoot.querySelector("li");o===null||o===void 0?void 0:o.focus()};this.focusSelectedOption=()=>{if(this.selectedOption){this.setOptionFocus(this.selectedOption)}else{this.focusNextOption()}};this.focusNextOption=()=>{if(!this.active){this.changeActiveState(true)}const t=this.getVisibleOptions();const o=t.findIndex((t=>document.activeElement===t));const s=o===t.length-1?t[0]:t[o+1];this.setOptionFocus(s)};this.focusPrevOption=()=>{if(!this.active){this.changeActiveState(true)}const t=this.getVisibleOptions();const o=t.findIndex((t=>document.activeElement===t));const s=o===0||o===-1?t[t.length-1]:t[o-1];this.setOptionFocus(s)};this.changeActiveState=t=>{if(!this.active){this.el.shadowRoot.querySelector("input").focus()}if(!t){this.el.focus()}this.active=t};this.toggleDropdown=()=>{const t=!this.active;this.changeActiveState(t)};this.updateFilter=t=>{this.filter=t;this.handleChangeFilterDebounced(this.filter)};this.optionIsVisible=(t,o)=>t===""||o.innerHTML.toLowerCase().includes(t);this.updateOptionVisibility=t=>{const o=this.getAllOptions();o.forEach((o=>{if(this.optionIsVisible(t,o)){o.classList.add("visible")}else{o.classList.remove("visible")}}))};this.handleChangeFilterDebounced=n((t=>{this.updateOptionVisibility(t)}),this.filterDebounceMs);this.handleInput=t=>{const o=t.target;const s=o.value;this.updateFilter(s)};this.label=undefined;this.active=false;this.selectedOption=null;this.filter=""}componentDidLoad(){this.updateOptionVisibility(this.filter)}handleFocus(){this.toggleDropdown()}handleClick(t){if(t.target instanceof customElements.get("custom-option")){const o=t.target;this.selectedOption=o;this.updateOption();this.toggleDropdown()}}handleDocumentClick(t){if(!this.active){return}if(!this.el.contains(t.target)){this.changeActiveState(false)}}handleKeyDown(t){var o;switch(t.key){case"Enter":case" ":t.preventDefault();if(this.active){this.updateOption()}this.toggleDropdown();if(this.selectedOption){this.focusSelectedOption()}break;case"Escape":if(this.active){this.changeActiveState(false);this.updateFilter(((o=this.selectedOption)===null||o===void 0?void 0:o.innerHTML)||this.filter)}break;case"ArrowDown":t.preventDefault();this.focusNextOption();break;case"ArrowUp":t.preventDefault();this.focusPrevOption();break}}render(){var t;return s(i,{key:"b40d04eb2e15781836cccace0924e7ff9214f515"},s("form",{key:"0977c4a3e68edf69cb552b2c3d9dba1c1008f5ee"},s("label",{key:"e75704e2cd7591da01cd19786305da41dcbec206",htmlFor:this.label},this.label),s("div",{key:"153e73e66bf3cf858401c844ac3ca27c48ba49a8",class:"search-wrapper"},s("input",{key:"285e57f8a507240ce25c55a3bed667733cae4069",class:"search",type:"text",placeholder:"Select",id:this.label,role:"combobox","aria-controls":`listbox-${this.label}`,"aria-haspopup":`listbox-${this.label}`,tabindex:"0","aria-expanded":this.active.toString(),onInput:this.handleInput,value:((t=this.selectedOption)===null||t===void 0?void 0:t.innerHTML)||this.filter})),s("ul",{key:"de5cd8d4bbb6c6759bebacc6a21fd364e0da66aa",class:`options${this.active?" active":""}`,role:"listbox",id:`listbox-${this.label}`},s("slot",{key:"1c95c46474278c83e6adfda17cdb0d004079bbe3"}))))}get el(){return e(this)}};a.style=c;const h=":host{display:none}:host(.visible){display:block}li{padding:.5rem 1rem;background-color:var(--custom-dropdown-background-color, #F5F5F7);cursor:pointer;transition:all 150ms ease-in;position:relative;font-family:Helvetica, sans-serif;color:var(--custom-dropdown-font-color, #767676)}li:hover{background-color:var(--custom-option-background-color-hover, #E5E5EA)}li:focus{background-color:var(--custom-option-background-color-focus, #D1D1D6)}";const l=h;const d=class{constructor(o){t(this,o);this.value=undefined}render(){return s(i,{key:"199fe97083f2954192dc1d49c2151303dfe9b20b"},s("li",{key:"a0ec203b372705661853a119948cc79e95bc4b47",role:"option",tabIndex:0},s("slot",{key:"d46cc1365da88917287c5b1ff36cf7fa294eb305"})))}get el(){return e(this)}};d.style=l;export{a as custom_dropdown,d as custom_option};
//# sourceMappingURL=p-3123c8d8.entry.js.map
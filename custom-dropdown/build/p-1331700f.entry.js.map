{"version":3,"names":["r","e","t","f","n","Array","isArray","o","length","clsx","arguments","debounce","fn","delay","timeoutId","args","clearTimeout","setTimeout","customDropdownCss","CustomDropdownStyle0","CustomDropdown","this","filterDebounceMs","updateOption","options","getVisibleOptions","optEl","find","document","activeElement","selectedOption","value","label","innerHTML","changeDropdown","emit","getAllOptions","from","el","querySelectorAll","setOptionFocus","option","li","shadowRoot","querySelector","focus","focusSelectedOption","focusNextOption","active","changeActiveState","index","findIndex","focusPrevOption","toggleDropdown","updateFilter","filter","handleChangeFilterDebounced","optionIsVisible","toLowerCase","includes","updateOptionVisibility","forEach","classList","add","remove","handleInput","event","target","componentDidLoad","handleFocus","handleClick","customElements","get","handleDocumentClick","contains","handleKeyDown","key","preventDefault","render","h","Host","htmlFor","class","type","placeholder","id","role","tabindex","toString","onInput","_a","customOptionCss","CustomOptionStyle0","CustomOption","tabIndex"],"sources":["node_modules/clsx/dist/clsx.mjs","src/utils/debounce.ts","src/components/custom-dropdown/custom-dropdown.css?tag=custom-dropdown&encapsulation=shadow","src/components/custom-dropdown/custom-dropdown.tsx","src/components/custom-option/custom-option.css?tag=custom-option&encapsulation=shadow","src/components/custom-option/custom-option.tsx"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","export const debounce = (fn: Function, delay: number) => {\n  let timeoutId: ReturnType<typeof setTimeout> | null = null;\n  return function (...args: any[]) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      fn(...args);\n      timeoutId = null;\n    }, delay);\n  };\n}\n",":host {\n  font-family: Helvetica, sans-serif;\n  display: block;\n  max-width: 24rem;\n  color: var(--custom-dropdown-font-color, #767676);\n  font-weight: var(--custom-dropdown-font-weight, 700);\n}\n\nform {\n  position: relative;\n}\n\nlabel {\n  display: block;\n  margin-bottom: .5rem;\n}\n\n.search {\n  padding: .5rem 1rem;\n  width: 100%;\n  box-sizing: border-box;\n  font-size: 1rem;\n  background-color: var(--custom-dropdown-background-color, #F5F5F7);\n  color: var(--custom-dropdown-font-color, #767676);\n  font-weight: var(--custom-dropdown-font-weight, 700);\n  border: none;\n}\n\n.search-wrapper {\n  position: relative;\n  background: none;\n  border: none;\n  width: 100%;\n  background-color: var(--custom-dropdown-background-color, #F5F5F7);\n}\n\n.search-wrapper::before {\n  content: 'â–¼';\n  position: absolute;\n  right: .8rem;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.options {\n  position: absolute;\n  left: 0;\n  right: 0;\n  padding: 0;\n  margin: 0;\n  overflow-y: auto;\n  list-style-type: none;\n  transform: scale(1, 0);\n  transform-origin: top left;\n  transition: all 150ms ease-in;\n  pointer-events: none;\n  z-index: 2;\n}\n\n.options.active {\n  opacity: 1;\n  transform: scale(1, 1);\n  pointer-events: auto;\n}\n","import { Component, h, ComponentInterface, Host, Prop, State, Listen, Element, Event, EventEmitter } from '@stencil/core';\nimport clsx from 'clsx';\nimport { debounce } from '../../utils/debounce';\nimport { Option } from '../../utils/models';\n\n/**\n * Custom dropdown component with built in optional search. Should be used along with custom-option components simiarly\n * to the native browser select element\n */\n@Component({\n  tag: 'custom-dropdown',\n  styleUrl: 'custom-dropdown.css',\n  shadow: true,\n})\nexport class CustomDropdown implements ComponentInterface {\n  /**\n   * Label above the dropdown\n   */\n  @Prop() label: string;\n\n  itemContainerRef!: HTMLUListElement;\n\n  /**\n   * Whether or not the dropdown is open\n   */\n  @State() active: boolean = false;\n\n  /**\n   * Value of the dropdown\n   */\n  @State() selectedOption: Option = null;\n\n  /**\n   * The value of the input\n   */\n  @State() filter: string = '';\n\n  @Element() el: HTMLElement;\n\n  /**\n   * Fires whenever the value of the dropdown changes\n   */\n  @Event() changeDropdown: EventEmitter<string>;\n\n  /**\n   * Time in milliseconds to debounce the handleChangeFilterDebounced\n   */\n  private filterDebounceMs = 200;\n\n  componentDidLoad() {\n    this.updateOptionVisibility(this.filter);\n  }\n\n  @Listen('focus')\n  handleFocus() {\n    this.toggleDropdown();\n  }\n\n  @Listen('click')\n  handleClick(event: MouseEvent) {\n    if (event.target instanceof customElements.get('custom-option')) {\n      const option = event.target as HTMLCustomOptionElement;\n      this.selectedOption = { value: option.value, label: option.innerHTML };\n      this.updateOption();\n      this.toggleDropdown();\n    }\n  }\n\n  @Listen('click', { target: 'document' })\n  handleDocumentClick(event: MouseEvent) {\n    if (!this.active) {\n      return;\n    }\n    if (!this.el.contains(event.target as Node)) {\n      this.changeActiveState(false);\n    }\n  }\n\n  private updateOption = () => {\n    const options = this.getVisibleOptions();\n    const optEl = options.find(o => document.activeElement === o);\n    this.selectedOption = optEl ? { value: optEl.value, label: optEl.innerHTML } : this.selectedOption;\n    this.changeDropdown.emit(this.selectedOption ? this.selectedOption.value : '');\n  };\n\n  getAllOptions = () => Array.from(this.el.querySelectorAll('custom-option'));\n\n  getVisibleOptions = () => Array.from(this.el.querySelectorAll('custom-option.visible') as NodeListOf<HTMLCustomOptionElement>);\n\n  setOptionFocus = (option: Option | HTMLCustomOptionElement) => {\n    const optEl = 'label' in option ? this.getVisibleOptions().find(o => o.value === option.value) : option;\n    const li = optEl?.shadowRoot.querySelector('li');\n    li?.focus();\n  };\n\n  focusSelectedOption = () => {\n    if (this.selectedOption) {\n      this.setOptionFocus(this.selectedOption);\n    } else {\n      this.focusNextOption();\n    }\n  };\n\n  focusNextOption = () => {\n    if (!this.active) {\n      this.changeActiveState(true);\n    }\n    const options = this.getVisibleOptions();\n    const index = options.findIndex(o => document.activeElement === o);\n    const option = index === options.length - 1 ? options[0] : options[index + 1];\n    this.setOptionFocus(option);\n  };\n\n  focusPrevOption = () => {\n    if (!this.active) {\n      this.changeActiveState(true);\n    }\n    const options = this.getVisibleOptions();\n    const index = options.findIndex(o => document.activeElement === o);\n    const option = index === 0 || index === -1 ? options[options.length - 1] : options[index - 1];\n    this.setOptionFocus(option);\n  };\n\n  private changeActiveState = (active: boolean) => {\n    if (!this.active) {\n      this.el.shadowRoot.querySelector('input').focus();\n    }\n    if (!active) {\n      this.el.focus();\n    }\n    this.active = active;\n  };\n\n  private toggleDropdown = () => {\n    const active = !this.active;\n    this.changeActiveState(active);\n  };\n\n  @Listen('keydown')\n  handleKeyDown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        if (this.active) {\n          this.updateOption();\n        }\n        this.toggleDropdown();\n        if (this.selectedOption) {\n          this.focusSelectedOption();\n        }\n        break;\n      case 'Escape':\n        if (this.active) {\n          this.changeActiveState(false);\n          this.updateFilter(this.selectedOption ? this.selectedOption.label : this.filter);\n        }\n        break;\n      case 'ArrowDown':\n        event.preventDefault();\n        this.focusNextOption();\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.focusPrevOption();\n        break;\n    }\n  }\n\n  updateFilter = (value: string) => {\n    this.filter = value;\n    this.handleChangeFilterDebounced(this.filter);\n  };\n\n  optionIsVisible = (filter: string, option: HTMLCustomOptionElement) =>\n    filter === '' || option.innerHTML.toLowerCase().includes(filter);\n\n  updateOptionVisibility = (filter: string) => {\n    const options = this.getAllOptions();\n    options.forEach(option => {\n      if (this.optionIsVisible(filter, option)) {\n        option.classList.add('visible');\n      } else {\n        option.classList.remove('visible');\n      }\n    });\n  };\n\n  handleChangeFilterDebounced = debounce((filter: string) => {\n    this.updateOptionVisibility(filter);\n  }, this.filterDebounceMs);\n\n  handleInput = (event: Event) => {\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n    this.updateFilter(value);\n  };\n\n  render() {\n    return (\n      <Host>\n        <form>\n          <label htmlFor={this.label}>{this.label}</label>\n          <div class=\"search-wrapper\">\n            <input\n              class=\"search\"\n              type=\"text\"\n              placeholder=\"Select\"\n              id={this.label}\n              role=\"combobox\"\n              aria-controls={`listbox-${this.label}`}\n              aria-haspopup={`listbox-${this.label}`}\n              tabindex=\"0\"\n              aria-expanded={this.active.toString()}\n              onInput={this.handleInput}\n              value={this.selectedOption?.label || this.filter}\n            />\n          </div>\n          <ul class={clsx('options', { active: this.active })} role=\"listbox\" id={`listbox-${this.label}`}>\n            <slot></slot>\n          </ul>\n        </form>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: none;\n}\n\n:host(.visible) {\n  /* outline: 1px solid red; */\n  display: block;\n}\n\nli {\n  padding: .5rem 1rem;\n  background-color: var(--custom-dropdown-background-color, #F5F5F7);\n\n  cursor: pointer;\n  transition: all 150ms ease-in;\n  position: relative;\n  font-family: Helvetica, sans-serif;\n\n  color: var(--custom-dropdown-font-color, #767676);\n}\n\nli:hover {\n  background-color: var(--custom-option-background-color-hover, #E5E5EA);\n}\n\nli:focus {\n  background-color: var(--custom-option-background-color-focus, #D1D1D6);\n}\n","import { Component, Host, h, Event, EventEmitter, Prop, Element } from '@stencil/core';\nimport { Option } from '../../utils/models';\n\n/**\n * Custom option element for use with the custom-dropdown element. Acts similarly to the browser's\n * built in option element. Only to be used inside of custom-dropdown\n */\n@Component({\n  tag: 'custom-option',\n  styleUrl: 'custom-option.css',\n  shadow: true\n})\nexport class CustomOption {\n  @Element() el: HTMLElement;\n  /**\n   * Fired when clicking on an option\n   */\n  @Event() selectOption: EventEmitter<Option>;\n\n  /**\n   * The value that will emitted when the custom-dropdown changes\n   */\n  @Prop() value: string;\n\n  render() {\n    return (\n      <Host>\n        <li role=\"option\" tabIndex={0}>\n          <slot></slot>\n        </li>\n      </Host>\n    );\n  }\n}\n"],"mappings":"gEAAA,SAASA,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAE,GAAG,GAAG,iBAAiBH,GAAG,iBAAiBA,EAAEG,GAAGH,OAAO,GAAG,iBAAiBA,EAAE,GAAGI,MAAMC,QAAQL,GAAG,CAAC,IAAIM,EAAEN,EAAEO,OAAO,IAAIN,EAAE,EAAEA,EAAEK,EAAEL,IAAID,EAAEC,KAAKC,EAAEH,EAAEC,EAAEC,OAAOE,IAAIA,GAAG,KAAKA,GAAGD,EAAE,MAAM,IAAIA,KAAKF,EAAEA,EAAEE,KAAKC,IAAIA,GAAG,KAAKA,GAAGD,GAAG,OAAOC,CAAC,CAAQ,SAASK,IAAO,IAAI,IAAIR,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAGG,EAAEG,UAAUF,OAAOL,EAAEI,EAAEJ,KAAKF,EAAES,UAAUP,MAAMD,EAAEF,EAAEC,MAAMG,IAAIA,GAAG,KAAKA,GAAGF,GAAG,OAAOE,CAAC,CCAxW,MAAMO,EAAW,CAACC,EAAcC,KACrC,IAAIC,EAAkD,KACtD,OAAO,YAAaC,GAClB,GAAID,EAAW,CACbE,aAAaF,E,CAEfA,EAAYG,YAAW,KACrBL,KAAMG,GACND,EAAY,IAAI,GACfD,E,CACJ,ECVH,MAAMK,EAAoB,4+BAC1B,MAAAC,EAAeD,E,MCaFE,EAAc,M,wEAiCjBC,KAAAC,iBAAmB,IA+BnBD,KAAAE,aAAe,KACrB,MAAMC,EAAUH,KAAKI,oBACrB,MAAMC,EAAQF,EAAQG,MAAKpB,GAAKqB,SAASC,gBAAkBtB,IAC3Dc,KAAKS,eAAiBJ,EAAQ,CAAEK,MAAOL,EAAMK,MAAOC,MAAON,EAAMO,WAAcZ,KAAKS,eACpFT,KAAKa,eAAeC,KAAKd,KAAKS,eAAiBT,KAAKS,eAAeC,MAAQ,GAAG,EAGhFV,KAAAe,cAAgB,IAAM/B,MAAMgC,KAAKhB,KAAKiB,GAAGC,iBAAiB,kBAE1DlB,KAAAI,kBAAoB,IAAMpB,MAAMgC,KAAKhB,KAAKiB,GAAGC,iBAAiB,0BAE9DlB,KAAAmB,eAAkBC,IAChB,MAAMf,EAAQ,UAAWe,EAASpB,KAAKI,oBAAoBE,MAAKpB,GAAKA,EAAEwB,QAAUU,EAAOV,QAASU,EACjG,MAAMC,EAAKhB,IAAK,MAALA,SAAK,SAALA,EAAOiB,WAAWC,cAAc,MAC3CF,IAAE,MAAFA,SAAE,SAAFA,EAAIG,OAAO,EAGbxB,KAAAyB,oBAAsB,KACpB,GAAIzB,KAAKS,eAAgB,CACvBT,KAAKmB,eAAenB,KAAKS,e,KACpB,CACLT,KAAK0B,iB,GAIT1B,KAAA0B,gBAAkB,KAChB,IAAK1B,KAAK2B,OAAQ,CAChB3B,KAAK4B,kBAAkB,K,CAEzB,MAAMzB,EAAUH,KAAKI,oBACrB,MAAMyB,EAAQ1B,EAAQ2B,WAAU5C,GAAKqB,SAASC,gBAAkBtB,IAChE,MAAMkC,EAASS,IAAU1B,EAAQhB,OAAS,EAAIgB,EAAQ,GAAKA,EAAQ0B,EAAQ,GAC3E7B,KAAKmB,eAAeC,EAAO,EAG7BpB,KAAA+B,gBAAkB,KAChB,IAAK/B,KAAK2B,OAAQ,CAChB3B,KAAK4B,kBAAkB,K,CAEzB,MAAMzB,EAAUH,KAAKI,oBACrB,MAAMyB,EAAQ1B,EAAQ2B,WAAU5C,GAAKqB,SAASC,gBAAkBtB,IAChE,MAAMkC,EAASS,IAAU,GAAKA,KAAW,EAAI1B,EAAQA,EAAQhB,OAAS,GAAKgB,EAAQ0B,EAAQ,GAC3F7B,KAAKmB,eAAeC,EAAO,EAGrBpB,KAAA4B,kBAAqBD,IAC3B,IAAK3B,KAAK2B,OAAQ,CAChB3B,KAAKiB,GAAGK,WAAWC,cAAc,SAASC,O,CAE5C,IAAKG,EAAQ,CACX3B,KAAKiB,GAAGO,O,CAEVxB,KAAK2B,OAASA,CAAM,EAGd3B,KAAAgC,eAAiB,KACvB,MAAML,GAAU3B,KAAK2B,OACrB3B,KAAK4B,kBAAkBD,EAAO,EAkChC3B,KAAAiC,aAAgBvB,IACdV,KAAKkC,OAASxB,EACdV,KAAKmC,4BAA4BnC,KAAKkC,OAAO,EAG/ClC,KAAAoC,gBAAkB,CAACF,EAAgBd,IACjCc,IAAW,IAAMd,EAAOR,UAAUyB,cAAcC,SAASJ,GAE3DlC,KAAAuC,uBAA0BL,IACxB,MAAM/B,EAAUH,KAAKe,gBACrBZ,EAAQqC,SAAQpB,IACd,GAAIpB,KAAKoC,gBAAgBF,EAAQd,GAAS,CACxCA,EAAOqB,UAAUC,IAAI,U,KAChB,CACLtB,EAAOqB,UAAUE,OAAO,U,IAE1B,EAGJ3C,KAAAmC,4BAA8B7C,GAAU4C,IACtClC,KAAKuC,uBAAuBL,EAAO,GAClClC,KAAKC,kBAERD,KAAA4C,YAAeC,IACb,MAAMC,EAASD,EAAMC,OACrB,MAAMpC,EAAQoC,EAAOpC,MACrBV,KAAKiC,aAAavB,EAAM,E,iCA1KC,M,oBAKO,K,YAKR,E,CAc1B,gBAAAqC,GACE/C,KAAKuC,uBAAuBvC,KAAKkC,O,CAInC,WAAAc,GACEhD,KAAKgC,gB,CAIP,WAAAiB,CAAYJ,GACV,GAAIA,EAAMC,kBAAkBI,eAAeC,IAAI,iBAAkB,CAC/D,MAAM/B,EAASyB,EAAMC,OACrB9C,KAAKS,eAAiB,CAAEC,MAAOU,EAAOV,MAAOC,MAAOS,EAAOR,WAC3DZ,KAAKE,eACLF,KAAKgC,gB,EAKT,mBAAAoB,CAAoBP,GAClB,IAAK7C,KAAK2B,OAAQ,CAChB,M,CAEF,IAAK3B,KAAKiB,GAAGoC,SAASR,EAAMC,QAAiB,CAC3C9C,KAAK4B,kBAAkB,M,EAiE3B,aAAA0B,CAAcT,GACZ,OAAQA,EAAMU,KACZ,IAAK,QACL,IAAK,IACHV,EAAMW,iBACN,GAAIxD,KAAK2B,OAAQ,CACf3B,KAAKE,c,CAEPF,KAAKgC,iBACL,GAAIhC,KAAKS,eAAgB,CACvBT,KAAKyB,qB,CAEP,MACF,IAAK,SACH,GAAIzB,KAAK2B,OAAQ,CACf3B,KAAK4B,kBAAkB,OACvB5B,KAAKiC,aAAajC,KAAKS,eAAiBT,KAAKS,eAAeE,MAAQX,KAAKkC,O,CAE3E,MACF,IAAK,YACHW,EAAMW,iBACNxD,KAAK0B,kBACL,MACF,IAAK,UACHmB,EAAMW,iBACNxD,KAAK+B,kBACL,M,CAiCN,MAAA0B,G,MACE,OACEC,EAACC,EAAI,CAAAJ,IAAA,4CACHG,EAAA,QAAAH,IAAA,4CACEG,EAAA,SAAAH,IAAA,2CAAOK,QAAS5D,KAAKW,OAAQX,KAAKW,OAClC+C,EAAA,OAAAH,IAAA,2CAAKM,MAAM,kBACTH,EAAA,SAAAH,IAAA,2CACEM,MAAM,SACNC,KAAK,OACLC,YAAY,SACZC,GAAIhE,KAAKW,MACTsD,KAAK,WAAU,gBACA,WAAWjE,KAAKW,QAAO,gBACvB,WAAWX,KAAKW,QAC/BuD,SAAS,IAAG,gBACGlE,KAAK2B,OAAOwC,WAC3BC,QAASpE,KAAK4C,YACdlC,QAAO2D,EAAArE,KAAKS,kBAAc,MAAA4D,SAAA,SAAAA,EAAE1D,QAASX,KAAKkC,UAG9CwB,EAAA,MAAAH,IAAA,2CAAIM,MAAOzE,EAAK,UAAW,CAAEuC,OAAQ3B,KAAK2B,SAAWsC,KAAK,UAAUD,GAAI,WAAWhE,KAAKW,SACtF+C,EAAA,QAAAH,IAAA,+C,qCC3NZ,MAAMe,EAAkB,2bACxB,MAAAC,EAAeD,E,MCWFE,EAAY,M,yFAYvB,MAAAf,GACE,OACEC,EAACC,EAAI,CAAAJ,IAAA,4CACHG,EAAA,MAAAH,IAAA,2CAAIU,KAAK,SAASQ,SAAU,GAC1Bf,EAAA,QAAAH,IAAA,8C","ignoreList":[]}
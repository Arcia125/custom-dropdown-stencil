import{r as t,c as o,h as s,a as i,g as e}from"./p-5db40762.js";function r(t){var o,s,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var e=t.length;for(o=0;o<e;o++)t[o]&&(s=r(t[o]))&&(i&&(i+=" "),i+=s)}else for(s in t)t[s]&&(i&&(i+=" "),i+=s);return i}function n(){for(var t,o,s=0,i="",e=arguments.length;s<e;s++)(t=arguments[s])&&(o=r(t))&&(i&&(i+=" "),i+=o);return i}const a=(t,o)=>{let s=null;return function(...i){if(s){clearTimeout(s)}s=setTimeout((()=>{t(...i);s=null}),o)}};const c=":host{font-family:Helvetica, sans-serif;display:block;max-width:24rem;color:var(--custom-dropdown-font-color, #767676);font-weight:var(--custom-dropdown-font-weight, 700)}form{position:relative}label{display:block;margin-bottom:.5rem}.search{padding:.5rem 1rem;width:100%;box-sizing:border-box;font-size:1rem;background-color:var(--custom-dropdown-background-color, #F5F5F7);color:var(--custom-dropdown-font-color, #767676);font-weight:var(--custom-dropdown-font-weight, 700);border:none}.search-wrapper{position:relative;background:none;border:none;width:100%;background-color:var(--custom-dropdown-background-color, #F5F5F7)}.search-wrapper::before{content:'â–¼';position:absolute;right:.8rem;top:50%;transform:translateY(-50%)}.options{position:absolute;left:0;right:0;padding:0;margin:0;overflow-y:auto;list-style-type:none;transform:scale(1, 0);transform-origin:top left;transition:all 150ms ease-in;pointer-events:none;z-index:2}.options.active{opacity:1;transform:scale(1, 1);pointer-events:auto}";const h=c;const l=class{constructor(s){t(this,s);this.changeDropdown=o(this,"changeDropdown",7);this.filterDebounceMs=200;this.updateOption=()=>{const t=this.getVisibleOptions();const o=t.find((t=>document.activeElement===t));this.selectedOption=o?{value:o.value,label:o.innerHTML}:this.selectedOption;this.changeDropdown.emit(this.selectedOption?this.selectedOption.value:"")};this.getAllOptions=()=>Array.from(this.el.querySelectorAll("custom-option"));this.getVisibleOptions=()=>Array.from(this.el.querySelectorAll("custom-option.visible"));this.setOptionFocus=t=>{const o="label"in t?this.getVisibleOptions().find((o=>o.value===t.value)):t;const s=o===null||o===void 0?void 0:o.shadowRoot.querySelector("li");s===null||s===void 0?void 0:s.focus()};this.focusSelectedOption=()=>{if(this.selectedOption){this.setOptionFocus(this.selectedOption)}else{this.focusNextOption()}};this.focusNextOption=()=>{if(!this.active){this.changeActiveState(true)}const t=this.getVisibleOptions();const o=t.findIndex((t=>document.activeElement===t));const s=o===t.length-1?t[0]:t[o+1];this.setOptionFocus(s)};this.focusPrevOption=()=>{if(!this.active){this.changeActiveState(true)}const t=this.getVisibleOptions();const o=t.findIndex((t=>document.activeElement===t));const s=o===0||o===-1?t[t.length-1]:t[o-1];this.setOptionFocus(s)};this.changeActiveState=t=>{if(!this.active){this.el.shadowRoot.querySelector("input").focus()}if(!t){this.el.focus()}this.active=t};this.toggleDropdown=()=>{const t=!this.active;this.changeActiveState(t)};this.updateFilter=t=>{this.filter=t;this.handleChangeFilterDebounced(this.filter)};this.optionIsVisible=(t,o)=>t===""||o.innerHTML.toLowerCase().includes(t);this.updateOptionVisibility=t=>{const o=this.getAllOptions();o.forEach((o=>{if(this.optionIsVisible(t,o)){o.classList.add("visible")}else{o.classList.remove("visible")}}))};this.handleChangeFilterDebounced=a((t=>{this.updateOptionVisibility(t)}),this.filterDebounceMs);this.handleInput=t=>{const o=t.target;const s=o.value;this.updateFilter(s)};this.label=undefined;this.active=false;this.selectedOption=null;this.filter=""}componentDidLoad(){this.updateOptionVisibility(this.filter)}handleFocus(){this.toggleDropdown()}handleClick(t){if(t.target instanceof customElements.get("custom-option")){const o=t.target;this.selectedOption={value:o.value,label:o.innerHTML};this.updateOption();this.toggleDropdown()}}handleDocumentClick(t){if(!this.active){return}if(!this.el.contains(t.target)){this.changeActiveState(false)}}handleKeyDown(t){switch(t.key){case"Enter":case" ":t.preventDefault();if(this.active){this.updateOption()}this.toggleDropdown();if(this.selectedOption){this.focusSelectedOption()}break;case"Escape":if(this.active){this.changeActiveState(false);this.updateFilter(this.selectedOption?this.selectedOption.label:this.filter)}break;case"ArrowDown":t.preventDefault();this.focusNextOption();break;case"ArrowUp":t.preventDefault();this.focusPrevOption();break}}render(){var t;return s(i,{key:"85bda5b0387cadc570a05d16cff74e38295eac63"},s("form",{key:"1bfa61df075fc7804a643d36aeabffe8c985ec10"},s("label",{key:"82ea64e093d31adaf873f65eb8abe60e97bded69",htmlFor:this.label},this.label),s("div",{key:"39e9f645c3a6bf1f97ccd66875fbdd5be874d33a",class:"search-wrapper"},s("input",{key:"2951b6b5e587ab1e4d38b69b8f7fcb6c47b90bf4",class:"search",type:"text",placeholder:"Select",id:this.label,role:"combobox","aria-controls":`listbox-${this.label}`,"aria-haspopup":`listbox-${this.label}`,tabindex:"0","aria-expanded":this.active.toString(),onInput:this.handleInput,value:((t=this.selectedOption)===null||t===void 0?void 0:t.label)||this.filter})),s("ul",{key:"60ca9bc0588547c6547c452e905e12ac4b37a5ab",class:n("options",{active:this.active}),role:"listbox",id:`listbox-${this.label}`},s("slot",{key:"59ad2a479b36e3d212e45c7db65820be4edca97a"}))))}get el(){return e(this)}};l.style=h;const d=":host{display:none}:host(.visible){display:block}li{padding:.5rem 1rem;background-color:var(--custom-dropdown-background-color, #F5F5F7);cursor:pointer;transition:all 150ms ease-in;position:relative;font-family:Helvetica, sans-serif;color:var(--custom-dropdown-font-color, #767676)}li:hover{background-color:var(--custom-option-background-color-hover, #E5E5EA)}li:focus{background-color:var(--custom-option-background-color-focus, #D1D1D6)}";const b=d;const f=class{constructor(s){t(this,s);this.selectOption=o(this,"selectOption",7);this.value=undefined}render(){return s(i,{key:"066fb002820003ddfe5b146e732a3b1a48a8bd7a"},s("li",{key:"6018a88bbe8598e0d3d9771403e77b64a8e26e8f",role:"option",tabIndex:0},s("slot",{key:"8133005ee6f8aa80a683202efbba680c0c5d3386"})))}get el(){return e(this)}};f.style=b;export{l as custom_dropdown,f as custom_option};
//# sourceMappingURL=p-1331700f.entry.js.map